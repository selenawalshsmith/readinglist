{"ast":null,"code":"var _jsxFileName = \"/Users/selena/readinglist/client/src/components/Explore.js\";\nimport React, { Component, KeyboardEvent } from 'react';\nimport axios from 'axios';\nimport BookGrid from \"./grid/BookGrid\";\nimport BookCard from \"./grid/BookCard\";\nimport Search from './Search';\nimport jwt_decode from \"jwt-decode\";\n\nclass Explore extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getInitialBookList = () => {\n      fetch('https://www.googleapis.com/books/v1/users/105309221066047026022/bookshelves/1001/volumes').then(response => response.json()).then(responsedata => {\n        //  console.log(responsedata.items);\n        const bookList = [];\n\n        for (var i = 0; i < responsedata.items.length; i++) {\n          const bookItem = {\n            id: responsedata.items[i].id,\n            //how I will save users books in db.\n            title: responsedata.items[i].volumeInfo.title,\n            author: responsedata.items[i].volumeInfo.authors,\n            description: responsedata.items[i].volumeInfo.description,\n            img: responsedata.items[i].volumeInfo.imageLinks.thumbnail\n          };\n          bookList.push(bookItem);\n        } //console.log(bookList);\n\n\n        this.setState({\n          myBooks: bookList\n        });\n      }).catch(function (error) {\n        console.log(error); //console.log(\"fail\");\n      });\n    };\n\n    this.performSearch = (event, searchQuery) => {\n      if (event.key === 'Enter') {\n        fetch('https://www.googleapis.com/books/v1/volumes?q=' + searchQuery).then(response => response.json()).then(responsedata => {\n          console.log(responsedata.items);\n          const bookList = [];\n\n          for (var i = 0; i < responsedata.items.length; i++) {\n            const bookItem = {\n              id: responsedata.items[i].id,\n              title: responsedata.items[i].volumeInfo.title,\n              author: responsedata.items[i].volumeInfo.authors,\n              description: responsedata.items[i].volumeInfo.description,\n              img: responsedata.items[i].volumeInfo.imageLinks.thumbnail\n            };\n            bookList.push(bookItem);\n          } //console.log(bookList);\n\n\n          this.setState({\n            myBooks: bookList\n          });\n        }).catch(function (error) {\n          console.log(error); //console.log(\"fail\");\n        });\n      }\n    };\n\n    this.state = {\n      //user: this.props.location.state.user,\n      myBooks: [],\n      searchQuery: \"empty\"\n    };\n  }\n\n  componentDidMount() {\n    this.getInitialBookList();\n\n    if (localStorage.jwtToken) {\n      // Set auth token header auth\n      const token = localStorage.jwtToken; //setAuthToken(token);\n      // Decode token and get user info and exp\n\n      const decoded = jwt_decode(token); // Set user and isAuthenticated\n      //setUser(decoded);\n      //console.log(decoded);\n      //App.setState({user: decoded});\n      //store.dispatch(setCurrentUser(decoded));\n      // Check for expired token\n\n      /*const currentTime = Date.now() / 1000; // to get in milliseconds\n      if (decoded.exp < currentTime) {\n        // Logout user\n        //logoutUser();\n        console.log(\"add logout action\");\n         // Redirect to login\n        window.location.href = \"./login\";\n      } else {*/\n\n      this.setState({\n        user: decoded.email\n      });\n      this.loadBooks(decoded.email); //console.log(this.state.user);\n      //console.log(decoded.email);\n      //return decoded.email;\n      //}\n    } //console.log(this.props.location.state.user);\n    //this.setState({user: this.props.user});\n\n  } //document.getElementbyId\n\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Search, {\n      performSearch: this.performSearch,\n      searchQuery: this.state.searchQuery,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }\n    }, \" Hello \", this.state.user), /*#__PURE__*/React.createElement(BookGrid, {\n      cols: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }\n    }, this.state.myBooks.map((bookItem, i) => /*#__PURE__*/React.createElement(BookCard, {\n      title: bookItem.title,\n      id: bookItem.id,\n      author: bookItem.author,\n      img: bookItem.img,\n      description: bookItem.description,\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}\n\nexport default Explore;","map":{"version":3,"sources":["/Users/selena/readinglist/client/src/components/Explore.js"],"names":["React","Component","KeyboardEvent","axios","BookGrid","BookCard","Search","jwt_decode","Explore","constructor","props","getInitialBookList","fetch","then","response","json","responsedata","bookList","i","items","length","bookItem","id","title","volumeInfo","author","authors","description","img","imageLinks","thumbnail","push","setState","myBooks","catch","error","console","log","performSearch","event","searchQuery","key","state","componentDidMount","localStorage","jwtToken","token","decoded","user","email","loadBooks","render","map"],"mappings":"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","sourcesContent":["import React, {Component, KeyboardEvent} from 'react';\nimport axios from 'axios';\nimport BookGrid from \"./grid/BookGrid\";\nimport BookCard from \"./grid/BookCard\";\nimport Search from './Search';\n\nimport jwt_decode from \"jwt-decode\";\n\nclass Explore extends Component{\n  constructor(props) {\n    super(props);\n    this.state = {\n      //user: this.props.location.state.user,\n      myBooks: [],\n      searchQuery: \"empty\"\n    }\n  }\n  getInitialBookList = () => {\n  fetch('https://www.googleapis.com/books/v1/users/105309221066047026022/bookshelves/1001/volumes')\n    .then(response => response.json())\n    .then((responsedata) => {\n    //  console.log(responsedata.items);\n      const bookList = [];\n      for(var i=0; i < responsedata.items.length; i++){\n        const bookItem = {\n          id: responsedata.items[i].id, //how I will save users books in db.\n          title: responsedata.items[i].volumeInfo.title,\n          author: responsedata.items[i].volumeInfo.authors,\n          description: responsedata.items[i].volumeInfo.description,\n          img: responsedata.items[i].volumeInfo.imageLinks.thumbnail\n        }\n        bookList.push(bookItem);\n      }\n      //console.log(bookList);\n      this.setState({myBooks: bookList});\n    }).catch(function (error){\n      console.log(error);\n    //console.log(\"fail\");\n  });\n };\n componentDidMount(){\n    this.getInitialBookList();\n    if (localStorage.jwtToken) {\n      // Set auth token header auth\n      const token = localStorage.jwtToken;\n      //setAuthToken(token);\n      // Decode token and get user info and exp\n      const decoded = jwt_decode(token);\n      // Set user and isAuthenticated\n      //setUser(decoded);\n      //console.log(decoded);\n      //App.setState({user: decoded});\n      //store.dispatch(setCurrentUser(decoded));\n      // Check for expired token\n      /*const currentTime = Date.now() / 1000; // to get in milliseconds\n      if (decoded.exp < currentTime) {\n        // Logout user\n        //logoutUser();\n        console.log(\"add logout action\");\n\n        // Redirect to login\n        window.location.href = \"./login\";\n      } else {*/\n        this.setState({user: decoded.email});\n        this.loadBooks(decoded.email);\n        //console.log(this.state.user);\n        //console.log(decoded.email);\n        //return decoded.email;\n      //}\n    }\n    //console.log(this.props.location.state.user);\n    //this.setState({user: this.props.user});\n  }\n\n  //document.getElementbyId\n  performSearch = (event: KeyboardEvent<HTMLInputElement>, searchQuery ) => {\n    if(event.key === 'Enter'){\n       fetch('https://www.googleapis.com/books/v1/volumes?q='+searchQuery)\n        .then(response => response.json())\n        .then((responsedata) => {\n            console.log(responsedata.items);\n            const bookList = [];\n            for(var i=0; i < responsedata.items.length; i++){\n              const bookItem = {\n                id: responsedata.items[i].id,\n                title: responsedata.items[i].volumeInfo.title,\n                author: responsedata.items[i].volumeInfo.authors,\n                description: responsedata.items[i].volumeInfo.description,\n                img: responsedata.items[i].volumeInfo.imageLinks.thumbnail\n              }\n              bookList.push(bookItem);\n            }\n            //console.log(bookList);\n            this.setState({myBooks: bookList});\n         }).catch(function (error){\n            console.log(error);\n            //console.log(\"fail\");\n        });\n    }\n  }\n  render (){\n    return (\n      <div className=\"container\">\n        <Search performSearch={this.performSearch} searchQuery={this.state.searchQuery}/>\n        <h1> Hello {this.state.user}</h1>\n        <BookGrid cols={3}>\n        {\n          this.state.myBooks.map((bookItem, i) => (\n            <BookCard title={bookItem.title} id={bookItem.id} author={bookItem.author} img={bookItem.img} description={bookItem.description} key={i}/>\n          ))}\n        </BookGrid>\n      </div>\n    )\n  }\n}\n\nexport default Explore;\n"]},"metadata":{},"sourceType":"module"}