{"ast":null,"code":"var _jsxFileName = \"/Users/selena/readinglist/client/src/components/UserHome.js\";\nimport React, { Component, KeyboardEvent } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport BookGrid from \"./grid/BookGrid\";\nimport BookCard from \"./grid/BookCard\";\nimport Search from \"./Search\";\nimport getBooks from \"./../actions/getBooks\";\nimport { isEmpty } from 'lodash';\n\nfunction IsLoading(props) {\n  const isLoading = props.isLoading;\n\n  if (isLoading) {\n    return /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 13,\n        columnNumber: 12\n      }\n    }, \"Loading...\");\n  }\n\n  return 0;\n}\n\nclass UserHome extends Component {\n  constructor(_props) {\n    super(_props);\n\n    this.loadBooks = email => {\n      axios.post(\"/api/users/getBookList\", {\n        email: this.state.user\n      }).then(response => {\n        //console.log(response.data.booklist);\n        const bookList = response.data.booklist;\n        const books = [];\n\n        for (let i = 0; i < bookList.length; i++) {\n          const bookItem = {\n            id: bookList[i].id,\n            //how I will save users books in db.\n            title: bookList[i].title,\n            author: bookList[i].author,\n            description: bookList[i].description,\n            img: bookList[i].img\n          };\n          books.push(bookItem);\n        }\n\n        this.setState({\n          myBooks: books\n        });\n        this.setState({\n          isLoading: false\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.ShowBooks = props => {\n      const isLoading = props.isLoading;\n\n      if (!this.state.isLoading) {\n        return /*#__PURE__*/React.createElement(BookGrid, {\n          cols: 3,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 14\n          }\n        }, this.state.myBooks.map((bookItem, i) => /*#__PURE__*/React.createElement(BookCard, {\n          title: bookItem.title,\n          id: bookItem.id,\n          author: bookItem.author,\n          img: bookItem.img,\n          description: bookItem.description,\n          key: i,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 21\n          }\n        })));\n      }\n\n      return /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 12\n        }\n      }, \"Loading books...\");\n    };\n\n    this.state = {\n      user: this.props.location.state.userData.email,\n      isLoading: true,\n      //jsonBookList: {},\n      //  myBooks: [book1, book2, book3] //this is an array of objects once populated\n      myBooks: []\n    };\n  }\n\n  getUserName(pathname) {\n    var path_arr = pathname.split(\"/\");\n    return path_arr[2];\n  }\n\n  //loadBooks(this.state.user);\n  componentDidMount() {\n    console.log(this.state);\n    this.loadBooks(this.state.user);\n  }\n\n  render() {\n    const myName = this.getUserName(this.props.location.pathname);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }\n    }, \"Hello \", myName), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 24\n      }\n    }, \"Explore\"))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ShowBooks, {\n      isLoading: this.state.isLoading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\n;\nexport default UserHome;","map":{"version":3,"sources":["/Users/selena/readinglist/client/src/components/UserHome.js"],"names":["React","Component","KeyboardEvent","axios","Link","BookGrid","BookCard","Search","getBooks","isEmpty","IsLoading","props","isLoading","UserHome","constructor","loadBooks","email","post","state","user","then","response","bookList","data","booklist","books","i","length","bookItem","id","title","author","description","img","push","setState","myBooks","catch","err","console","log","ShowBooks","map","location","userData","getUserName","pathname","path_arr","split","componentDidMount","render","myName"],"mappings":"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","sourcesContent":["\nimport React, {Component,  KeyboardEvent}  from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport BookGrid from \"./grid/BookGrid\";\nimport BookCard from \"./grid/BookCard\";\nimport Search from \"./Search\";\nimport getBooks from \"./../actions/getBooks\";\nimport {isEmpty} from 'lodash';\nfunction IsLoading(props){\n  const isLoading = props.isLoading;\n  if (isLoading){\n    return <h1>Loading...</h1>\n  }\n  return 0;\n}\n\nclass UserHome extends Component{\n  constructor(props) {\n    super(props);\n\n    this.state= {\n      user: this.props.location.state.userData.email,\n      isLoading: true,\n      //jsonBookList: {},\n    //  myBooks: [book1, book2, book3] //this is an array of objects once populated\n      myBooks: []\n    }\n  }\n  getUserName(pathname){\n    var path_arr = pathname.split(\"/\");\n    return path_arr[2];\n  }\n  loadBooks = (email) => {\n    axios.post(\"/api/users/getBookList\", {email: this.state.user})\n    .then((response) => {\n      //console.log(response.data.booklist);\n      const bookList = response.data.booklist;\n      const books = [];\n      for (let i=0; i<bookList.length; i++){\n        const bookItem = {\n          id: bookList[i].id, //how I will save users books in db.\n          title: bookList[i].title,\n          author: bookList[i].author,\n          description: bookList[i].description,\n          img: bookList[i].img\n        }\n        books.push(bookItem);\n      }\n      this.setState({myBooks: books});\n      this.setState({isLoading: false});\n    }).catch(err => {console.log(err);});\n  }\n  ShowBooks = (props) => {\n    const isLoading = props.isLoading;\n    if (!this.state.isLoading){\n      return <BookGrid cols={3}>\n              {\n                this.state.myBooks.map((bookItem, i) => (\n                    <BookCard title={bookItem.title} id={bookItem.id} author={bookItem.author} img={bookItem.img} description={bookItem.description} key={i}/>\n              ))}\n              </BookGrid>\n    }\n    return <h2>Loading books...</h2>\n  }\n  //loadBooks(this.state.user);\n\n  componentDidMount(){\n    console.log(this.state);\n    this.loadBooks(this.state.user);\n  }\n  render (){\n    const myName = this.getUserName(this.props.location.pathname);\n\n    return (\n      <div>\n        <div>Hello {myName}</div>\n        <div>\n        {/*<p>{this.state.isLoading ? 'Loading books...': ''}</p>*/}\n        </div>\n        <div>\n          <Link to=\"/\"><button>Explore</button></Link>\n        </div>\n        <div>\n          <ShowBooks isLoading={this.state.isLoading}/>\n        </div>\n      </div>\n    )\n  }\n};\nexport default UserHome;\n"]},"metadata":{},"sourceType":"module"}