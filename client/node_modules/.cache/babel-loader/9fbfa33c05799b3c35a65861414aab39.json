{"ast":null,"code":"var _jsxFileName = \"/Users/selena/readinglist/src/Login.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport OktaSignInWidget from './OktaSignInWidget';\nimport { withAuth } from '@okta/okta-react';\nexport default withAuth(class Login extends Component {\n  constructor(props) {\n    super(props);\n    this.onSuccess = this.onSuccess.bind(this);\n    this.onError = this.onError.bind(this);\n    this.state = {\n      authenticated: null\n    };\n    this.checkAuthentication();\n  }\n\n  async checkAuthentication() {\n    const authenticated = await this.props.auth.isAuthenticated();\n\n    if (authenticated !== this.state.authenticated) {\n      this.setState({\n        authenticated\n      });\n    }\n  }\n\n  componentDidUpdate() {\n    this.checkAuthentication();\n  }\n\n  onSuccess(res) {\n    if (res.status === 'SUCCESS') {\n      return this.props.auth.redirect({\n        sessionToken: res.session.token\n      });\n    } else {// The user can be in another authentication state that requires further action.\n      // For more information about these states, see:\n      //   https://github.com/okta/okta-signin-widget#rendereloptions-success-error\n    }\n  }\n\n  onError(err) {\n    console.log('error logging in', err);\n  }\n\n  render() {\n    if (this.state.authenticated === null) return null;\n    return this.state.authenticated ? /*#__PURE__*/React.createElement(Redirect, {\n      to: {\n        pathname: '/'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 7\n      }\n    }) : /*#__PURE__*/React.createElement(OktaSignInWidget, {\n      baseUrl: this.props.baseUrl,\n      onSuccess: this.onSuccess,\n      onError: this.onError,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 7\n      }\n    });\n  }\n\n});","map":{"version":3,"sources":["/Users/selena/readinglist/src/Login.js"],"names":["React","Component","Redirect","OktaSignInWidget","withAuth","Login","constructor","props","onSuccess","bind","onError","state","authenticated","checkAuthentication","auth","isAuthenticated","setState","componentDidUpdate","res","status","redirect","sessionToken","session","token","err","console","log","render","pathname","baseUrl"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAOC,gBAAP,MAA6B,oBAA7B;AACA,SAASC,QAAT,QAAyB,kBAAzB;AAEA,eAAeA,QAAQ,CAAC,MAAMC,KAAN,SAAoBJ,SAApB,CAA8B;AACpDK,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,SAAL,GAAiB,KAAKA,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKC,OAAL,GAAe,KAAKA,OAAL,CAAaD,IAAb,CAAkB,IAAlB,CAAf;AACA,SAAKE,KAAL,GAAa;AACXC,MAAAA,aAAa,EAAE;AADJ,KAAb;AAGA,SAAKC,mBAAL;AACD;;AAED,QAAMA,mBAAN,GAA4B;AAC1B,UAAMD,aAAa,GAAG,MAAM,KAAKL,KAAL,CAAWO,IAAX,CAAgBC,eAAhB,EAA5B;;AACA,QAAIH,aAAa,KAAK,KAAKD,KAAL,CAAWC,aAAjC,EAAgD;AAC9C,WAAKI,QAAL,CAAc;AAAEJ,QAAAA;AAAF,OAAd;AACD;AACF;;AAEDK,EAAAA,kBAAkB,GAAG;AACnB,SAAKJ,mBAAL;AACD;;AAEDL,EAAAA,SAAS,CAACU,GAAD,EAAM;AACb,QAAIA,GAAG,CAACC,MAAJ,KAAe,SAAnB,EAA8B;AAC5B,aAAO,KAAKZ,KAAL,CAAWO,IAAX,CAAgBM,QAAhB,CAAyB;AAC9BC,QAAAA,YAAY,EAAEH,GAAG,CAACI,OAAJ,CAAYC;AADI,OAAzB,CAAP;AAGF,KAJA,MAIM,CACN;AACA;AACA;AACC;AACF;;AAEDb,EAAAA,OAAO,CAACc,GAAD,EAAM;AACXC,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCF,GAAhC;AACD;;AAEDG,EAAAA,MAAM,GAAG;AACP,QAAI,KAAKhB,KAAL,CAAWC,aAAX,KAA6B,IAAjC,EAAuC,OAAO,IAAP;AACvC,WAAO,KAAKD,KAAL,CAAWC,aAAX,gBACL,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAE;AAAEgB,QAAAA,QAAQ,EAAE;AAAZ,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADK,gBAEL,oBAAC,gBAAD;AACE,MAAA,OAAO,EAAE,KAAKrB,KAAL,CAAWsB,OADtB;AAEE,MAAA,SAAS,EAAE,KAAKrB,SAFlB;AAGE,MAAA,OAAO,EAAE,KAAKE,OAHhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF;AAMD;;AA9CmD,CAA/B,CAAvB","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport OktaSignInWidget from './OktaSignInWidget';\nimport { withAuth } from '@okta/okta-react';\n\nexport default withAuth(class Login extends Component {\n  constructor(props) {\n    super(props);\n    this.onSuccess = this.onSuccess.bind(this);\n    this.onError = this.onError.bind(this);\n    this.state = {\n      authenticated: null\n    };\n    this.checkAuthentication();\n  }\n\n  async checkAuthentication() {\n    const authenticated = await this.props.auth.isAuthenticated();\n    if (authenticated !== this.state.authenticated) {\n      this.setState({ authenticated });\n    }\n  }\n\n  componentDidUpdate() {\n    this.checkAuthentication();\n  }\n\n  onSuccess(res) {\n    if (res.status === 'SUCCESS') {\n      return this.props.auth.redirect({\n        sessionToken: res.session.token\n      });\n   } else {\n    // The user can be in another authentication state that requires further action.\n    // For more information about these states, see:\n    //   https://github.com/okta/okta-signin-widget#rendereloptions-success-error\n    }\n  }\n\n  onError(err) {\n    console.log('error logging in', err);\n  }\n\n  render() {\n    if (this.state.authenticated === null) return null;\n    return this.state.authenticated ?\n      <Redirect to={{ pathname: '/' }}/> :\n      <OktaSignInWidget\n        baseUrl={this.props.baseUrl}\n        onSuccess={this.onSuccess}\n        onError={this.onError}/>;\n  }\n});\n"]},"metadata":{},"sourceType":"module"}